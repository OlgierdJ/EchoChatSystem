@using CoreLib.Entities.EchoCore.AccountCore
@*
    friendcomponent layout for when it exists within the scrollable list in the friendlistcomponent.

    This component should display the users displayname, status, customstatusmessage, image.

    Hovering the friend component should display their userhandle beside their displayname.

    Clicking Message or Hovering and left-clicking the member, allows the user to navigate directly to their shared private chat.

    Hovering and right-clicking the member allows the user to display the user tooltip of the friend.
*@
<div class="d-flex flex-grow-1" @onmouseover="MouseOver" @onmouseout="MouseOut">
    <MudBadge Color="@stringToColor.ConvertStringToColor(Account.ActivityStatus.IconColor)" Icon="@Account.ActivityStatus.Icon"
                Bordered Overlap="true" Origin="Origin.BottomRight">
         <MudImage Src="@Account.Profile.AvatarFileURL" Height="32" Width="32" ObjectFit="ObjectFit.Cover" Class="rounded-circle mt-1 ml-1" />
     </MudBadge>
     <!-- Currently bound on account, replace when updating to another DTO (if at all) -->
     <MudText Class="ml-3" Typo="Typo.caption">@((MarkupString)("<b>" + Account.Profile.DisplayName + "</b> " + (handleVisible ? $"<i> {Account.Name} </i>" : "") + "\r\n" + Account.ActivityStatus.Name).Replace(Environment.NewLine, "<br />"))</MudText>
     <MudSpacer />
     <MudIconButton Variant="Variant.Filled" Icon="@Icons.Material.Rounded.ChatBubble" Title="Message" />
     <MudIconButton Variant="Variant.Filled" Icon="@Icons.Material.Rounded.MoreVert" Title="More" />
 </div>
@code {
    [Parameter]
    public Account? Account { get; set; }

    public readonly StringToColor stringToColor = new();

    bool handleVisible = false;
    void MouseOver(MouseEventArgs e) { handleVisible = true; }
    void MouseOut(MouseEventArgs e) { handleVisible = false; }
}
